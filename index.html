<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØµØ§Ù„Ø­ÙŠ</title>
  <link rel="stylesheet" href="style.css">
    <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-X1DV2V6X2Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-X1DV2V6X2Y');
  </script>
</head>
<body>

  <div class="header">
    <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ù…Ø¤Ø³Ø³Ø©" class="logo">
    <h1>Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØµØ§Ù„Ø­ÙŠ Ù„Ù„Ø¯Ø¹Ù… ÙˆØ§Ù„ØªÙ…ÙŠÙ‘Ø²</h1>
  </div>
  
  <div class="container">
    <div class="introduction">
      <p style="font-size: 1.4em; font-weight: bold; line-height: 1.6;">
        Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ù…Ø¤Ø³Ø³Ø© Ø§Ù„ØµØ§Ù„Ø­ÙŠØŒ Ø­ÙŠØ« Ù†Ø³Ø¹Ù‰ Ø¬Ø§Ù‡Ø¯ÙŠÙ† Ù„ØªÙ‚Ø¯ÙŠÙ… Ø£ÙØ¶Ù„ Ø¯Ø¹Ù… ØªØ¹Ù„ÙŠÙ…ÙŠ ÙˆØªØ±Ø¨ÙˆÙŠ Ù„Ø£Ø¨Ù†Ø§Ø¦ÙƒÙ…. Ù‡Ø¯ÙÙ†Ø§ Ù‡Ùˆ ØªÙ…ÙƒÙŠÙ† ÙƒÙ„ ØªÙ„Ù…ÙŠØ° Ù…Ù† ØªØ­Ù‚ÙŠÙ‚ Ø£Ù‚ØµÙ‰ Ø¥Ù…ÙƒØ§Ù†Ø§ØªÙ‡ØŒ ÙˆØªØ¬Ø§ÙˆØ² Ø§Ù„ØµØ¹ÙˆØ¨Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©ØŒ ÙˆØ¨Ù†Ø§Ø¡ Ù…Ø³ØªÙ‚Ø¨Ù„ Ù…Ø´Ø±Ù‚ Ù…Ù† Ø®Ù„Ø§Ù„ Ù…Ø³ÙŠØ±Ø© Ø¯Ø±Ø§Ø³ÙŠØ© Ù†Ø§Ø¬Ø­Ø©.
      </p>
    </div>
    
    <div class="quick-features">
      <h2>Ù…ÙŠØ²Ø§Øª Ø³Ø±ÙŠØ¹Ø©</h2>
      <div class="features-container">
        <div class="feature-card" onclick="openScheduleModal()">
          <div class="icon">ğŸ“…</div>
          <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ (Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ ÙˆØ«Ø§Ù†ÙˆÙŠ)</h3>
          <p>Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ÙŠ</p>
        </div>
        <div class="feature-card" onclick="openPrimaryScheduleModal()">
          <div class="icon">ğŸ“…</div>
          <h3>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ (Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ)</h3>
          <p>Ø§Ø·Ù„Ø¹ Ø¹Ù„Ù‰ Ø¬Ø¯ÙˆÙ„ Ø­ØµØµ Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠØ©</p>
        </div>
        <div class="feature-card" onclick="openLoginModal('lessons')">
          <div class="icon">ğŸ“š</div>
          <h3>Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³</h3>
          <p>Ø§Ø¯Ø®Ù„ Ù„Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ù…Ù„Ø®ØµØ§Øª ÙˆØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ø¯Ø±ÙˆØ³</p>
        </div>
        <div class="feature-card" onclick="openLoginModal('contact')">
          <div class="icon">âœ‰ï¸</div>
          <h3>Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
          <p>Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</p>
        </div>
      </div>
    </div>
    
    <div class="links">
      <a href="login.html">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£ÙˆÙ„ÙŠØ§Ø¡</a>
      <a href="login.html?admin=1">Ø®Ø§Øµ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</a>
    </div>

    <div id="general-announcements-section" class="announcements-container">
      <h2>ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ù‡Ø§Ù…Ø© ğŸ“¢</h2>
      <ul id="announcements-list" class="announcements-list-styled">
        <div class="announcement-card">
          <h3><a href="https://drive.google.com/file/d/1A2A-PMfGE3x31intUydSwCwXMJzPh8Yy/view?usp=drive_link" target="_blank" style="color: inherit; text-decoration: none;">ØªØ­Ù…ÙŠÙ„ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„ØªØ·Ø¨ÙŠÙ‚</a></h3>
          <p class="date"> Ù†Ø¶Ø¹ Ø¹Ù„Ù‰ Ø°Ù…ØªÙƒÙ… ØªØ·Ø¨ÙŠÙ‚ Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ Ø®Ø§Øµ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
        </div>
        </ul>
    </div>

    <div id="top-students-section" class="top-students-container" style="display: none;"> <h2>ğŸ† Ù…ØªÙÙˆÙ‚Ùˆ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ğŸ†</h2>
      <p class="subtitle">Ù†Ø­ØªÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ Ø¨Ø·Ù„Ø§Ø¨Ù†Ø§ Ø§Ù„Ù…ØªÙ…ÙŠØ²ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ø£Ø¸Ù‡Ø±ÙˆØ§ ØªÙÙˆÙ‚Ù‹Ø§ Ù…Ù„Ø­ÙˆØ¸Ù‹Ø§. ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ Ù„Ù‡Ù…!</p>
      <div id="top-students-list" class="cards-container">
        </div>
    </div>

    </div>

  <div class="footer">
    <p>Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù†Ø´Ø± Â© 2025 Ø§Ù„ØµØ§Ù„Ø­ÙŠ â€” Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
  </div>

  <div id="modal-backdrop" class="modal-backdrop" onclick="closeModal()"></div>
  <div id="modal" class="modal">
    <button class="modal-close-btn" onclick="closeModal()">Ã—</button>
    <div id="modal-content">
      </div>
  </div>

  <div id="schedule-content" style="display: none;">
    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø¹Ø§Ù… (Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ ÙˆØ«Ø§Ù†ÙˆÙŠ)</h2>
    <div class="table-responsive">
      <table id="schedule-table-popup" class="timetable">
        <thead>
          <tr>
            <th>Ø§Ù„ØªÙˆÙ‚ÙŠØª</th>
            <th>Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†</th>
            <th>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</th>
            <th>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</th>
            <th>Ø§Ù„Ø®Ù…ÙŠØ³</th>
            <th>Ø§Ù„Ø¬Ù…Ø¹Ø©</th>
            <th>Ø§Ù„Ø³Ø¨Øª</th>
            <th>Ø§Ù„Ø£Ø­Ø¯</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <div id="primary-schedule-content" style="display: none;">
    <h2>Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø¹Ø§Ù… (Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ)</h2>
    <div class="table-responsive">
      <table id="primary-schedule-table-popup" class="timetable">
        <thead>
          <tr>
            <th>ØªÙˆÙ‚ÙŠØª Ø§Ù„Ø¯Ø®ÙˆÙ„</th>
            <th>Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†</th>
            <th>Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</th>
            <th>Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</th>
            <th>Ø§Ù„Ø®Ù…ÙŠØ³</th>
            <th>Ø§Ù„Ø¬Ù…Ø¹Ø©</th>
            <th>Ø§Ù„Ø³Ø¨Øª</th>
            <th>Ø§Ù„Ø£Ø­Ø¯</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script src="guardian_script.js"></script> 
  <script src="schedule_script.js"></script>
  <script src="schedule_primary_script.js"></script>
  <script>
    const modal = document.getElementById('modal');
    const modalBackdrop = document.getElementById('modal-backdrop');
    const modalContent = document.getElementById('modal-content');

    function openModal(content, modalClass = '') {
      modalContent.innerHTML = content;
      modal.className = 'modal'; 
      if (modalClass) modal.classList.add(modalClass);
      modal.style.display = 'block';
      modalBackdrop.style.display = 'block';
    }

    function closeModal() {
      modal.style.display = 'none';
      modalBackdrop.style.display = 'none';
      modalContent.innerHTML = '';
    }

    function openScheduleModal() {
      const scheduleHTML = document.getElementById('schedule-content').innerHTML;
      openModal(scheduleHTML, 'modal-lg');
      buildSchedule("schedule-table-popup");
    }

    // Ø¯Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„ÙØªØ­ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ
    function openPrimaryScheduleModal() {
      const scheduleHTML = document.getElementById('primary-schedule-content').innerHTML;
      openModal(scheduleHTML, 'modal-lg');
      buildPrimarySchedule("primary-schedule-table-popup");
    }

    async function handleLogin(event, target) {
      event.preventDefault();
      const form = event.target;
      const phone = form.querySelector('input[type="text"]').value;
      const password = form.querySelector('input[type="password"]').value;
      const errorEl = form.querySelector('.error-message');
      errorEl.textContent = '';
      
      if (password === 'aymenstam') {
        sessionStorage.setItem("admin", "true");
        if (target === 'lessons') {
          window.location.href = 'lessons.html';
        } else if (target === 'contact') {
          window.open('https://m.me/770223689507881', '_blank');
          closeModal();
        }
        return;
      }
      try {
        const guardian = await guardianLogin(phone, password);
        if (guardian) {
          sessionStorage.setItem("guardian", JSON.stringify(guardian));
          if (target === 'lessons') {
            window.location.href = 'lessons.html';
          } else if (target === 'contact') {
            window.open('https://m.me/770223689507881', '_blank');
            closeModal();
          }
        } else {
          errorEl.textContent = 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.';
        }
      } catch (err) {
        errorEl.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
        console.error(err);
      }
    }

    function openLoginModal(target) {
      let loginTitle = '';
      if (target === 'lessons') {
        loginTitle = 'Ø§Ù„Ø§Ø·Ù„Ø§Ø¹ Ø¹Ù„Ù‰ Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯Ø±ÙˆØ³';
      } else if (target === 'contact') {
        loginTitle = 'Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©';
      }

      const loginHTML = `
        <h2>${loginTitle}</h2>
        <p>Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</p>
        <form onsubmit="handleLogin(event, '${target}')">
          <input type="text" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„ÙˆÙ„ÙŠ" required>
          <input type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" required>
          <button type="submit">Ø¯Ø®ÙˆÙ„</button>
          <p class="error-message" style="color:red;"></p>
        </form>
      `;
      openModal(loginHTML);
    }

    document.addEventListener('DOMContentLoaded', async () => {
        const section = document.getElementById('general-announcements-section');
        const listContainer = document.getElementById('announcements-list');

        try {
            const response = await fetch('announcements.json');
            if (!response.ok) return;

            const announcements = await response.json();

            if (announcements && announcements.length > 0) {
                announcements.forEach(announcement => {
                    const card = document.createElement('div');
                    card.className = 'announcement-card';
                    card.innerHTML = `
                        <h3>${announcement.text}</h3>
                        <p class="date">${announcement.date}</p>
                    `;
                    listContainer.appendChild(card);
                });
            }
        } catch (error) {
            console.error('Error fetching general announcements:', error);
        }
    });

    document.addEventListener('DOMContentLoaded', async () => {
      const section = document.getElementById('top-students-section');
      const listContainer = document.getElementById('top-students-list');
      const colors = ['gold', 'silver', 'bronze'];
      try {
        const response = await fetch('top_students.json');
        if (!response.ok) return;

        const topStudentsData = await response.json();

        if (Array.isArray(topStudentsData) && topStudentsData.length > 0) {
          listContainer.innerHTML = '';
          topStudentsData.forEach((student, index) => {
            const card = document.createElement('div');
            const colorClass = colors[index % colors.length];
            card.className = `student-card ${colorClass}`;
            card.innerHTML = `
              <h3>${student.name}</h3>
              <p class="level">${student.level}</p>
              <p class="reason">"${student.reason}"</p>
            `;
            listContainer.appendChild(card);
          });
          section.style.display = 'block';
        } 
        else if (typeof topStudentsData === 'string') {
          listContainer.innerHTML = `<p style="text-align: center; font-size: 1.2em; color: #555; padding: 20px;">${topStudentsData}</p>`;
          section.style.display = 'block';
        }

      } catch (error) {
        console.error('Error fetching top students:', error);
      }
    });
  </script>
</body>
</html>
